<html manifest="84ciss.manifest">
  <head>
    <meta charset="utf-8">
    <title>PS4 Jailbreak - Caching</title>
    <link rel="stylesheet prefetch" href="Style.css">
    <style>
      body{background-image: url('');background-color:#111112;background-attachment:fixed;background-size:100%;background-repeat:no-repeat;font-family:system-ui;text-align:center}
      h1 {
        color: #fff;
        font-size: 46px;
        font-weight: bold;
        margin: 0 0 0 0.0;
        text-shadow: 3px 2px #3d3939;
      }
      #console {
        font-family: monospace;
        background-color: rgba(30, 30, 30, 0.8);
        color: #87FF33;
        border: 2px solid #032140;
        padding: 20px;
        border-radius: 10px;
        margin: 20px auto;
        width: 80%;
        max-width: 600px;
        text-align: left;
        font-size: 16px;
      }
    </style>
  </head>
  <body>
    <br><br><br>
    <h1><i>PS4 Jailbreak v2.0 (Fw 9.00)</i></h1>
    <br>
    <h1 style='font-size:26px;'><i>Caching Files...</i></h1>
    <br><br>
    <pre id="console"></pre>
    
    <div style="background-color:#032140;color:white;position:fixed;left:0;bottom:0px;width:100%;text-align:center;">
      <font style='color:#87FF33'>Modder & Dev : </font><a href="https://twitter.com/84Ciss" style='font-size:20px;text-align:center;color:yellow;'>@84Ciss</a> - Find Me In Tweeter if you have any kind of issues !
      <br><font style='color:#87FF33'>Special thanks : </font>*Many Many Thanks to all Contributors in PS4 Scene △○×□*<br>
    </div>
  </body>
  <script>
    // Clear history and prevent back navigation
    history.replaceState(null, null, 'cache.html');
    
    // Logging utility
    const outputConsole = document.getElementById("console");
    window.log = (msg) => { 
      outputConsole.textContent += msg + "\n"; 
      console.log(msg);
    };
    
    // Download progress (% display)
    function DLProgress(e) {
      if (e.total > 0) {
        const percent = Math.round((e.loaded / e.total) * 100);
        window.log(`[CACHE] Downloading... ${percent}% complete.`);
      }
    }
    
    // On cache complete
    function DisplayCacheProgress() {
      window.log(" ");
      window.log("[SUCCESS] Cache installed successfully!");
      window.log("Redirecting to jailbreak page in 2 seconds...");
      
      // Navigate to index.html to load the exploit from cache
      setTimeout(function() { 
        window.log("Redirecting now...");
        window.location.replace("index.html"); 
      }, 2000);
    }
    
    // Event listeners
    window.applicationCache.addEventListener("progress", DLProgress, false);
    
    window.applicationCache.oncached = function(e) { 
      window.log("[EVENT] Cache completed");
      DisplayCacheProgress(); 
    };
    
    window.applicationCache.onupdateready = function(e) { 
      window.log("[EVENT] Cache update ready");
      DisplayCacheProgress(); 
    };
    
    window.applicationCache.onnoupdate = function(e) {
      window.log("[EVENT] Cache already up to date");
      window.log("Redirecting to jailbreak page...");
      setTimeout(function() { 
        window.location.replace("index.html"); 
      }, 1000);
    };
    
    window.applicationCache.onerror = function(e) {
      window.log("[ERROR] Cache error occurred!");
      window.log("Redirecting anyway...");
      setTimeout(function() { 
        window.location.replace("index.html"); 
      }, 2000);
    };
    
    // Initialization message on DOM load
    document.addEventListener('DOMContentLoaded', () => {
      outputConsole.textContent = ""; // Clear console log
      window.log("===========================================");
      window.log("PS4 Jailbreak v2.0 - Cache System");
      window.log("===========================================");
      window.log(" ");
      window.log("[INIT] AppCache download starting...");
      window.log("[INIT] Please wait, this may take a moment.");
      window.log(" ");
    });
    
    // Theme support
    if(localStorage.getItem("theme")==null){
      localStorage.setItem("theme","2.jpg")
    }
    document.body.style.background = "url('"+localStorage.getItem("theme")+"')"
    document.body.style.backgroundSize = "cover"
  </script>
</html>
